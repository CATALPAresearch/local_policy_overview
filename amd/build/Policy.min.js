/**
 * Main method of the plugin. Load depending javascript and css before starting the timeline dashboard.
 *
 * @module     local/policy_overview
 * @class      policy_overview
 * @copyright  2022 Niels Seidel <niels.seidel@fernuni-hagen.de>
 * @license    MIT
 * @since      3.11
 *
 * TODO:
 * - temporal limit accaptance to 31.10.2020, window.open("https://example.com", "_blank");
 */
define([M.cfg.wwwroot+"/local/policy_overview/lib/vue.min.js",M.cfg.wwwroot+"/local/policy_overview/lib/moment-with-locales.min.js"],(function(n,e){return require.config({enforceDefine:!1,paths:{moment226:[M.cfg.wwwroot+"/local/policy_overview/lib/moment-with-locales.min.js"]},shim:{moment226:{exports:"moment"}}}),{init:function(t,i,s){return new n({el:"policy-container",data:function(){return{policies:t,message:i,backurl:s,hasRead:{}}},mounted:function(){},methods:{convertTime:function(n){return e.unix(n).format("DD.MM.YYYY")},getLink:function(n,e){return M.cfg.wwwroot+"/local/policy_overview/index.php?policy="+n.id+"&version="+n.version+"&status="+e},getPolicyLink:function(n){return M.cfg.wwwroot+"/admin/tool/policy/viewall.php#policy-"+n}},template:'\n                    <div id="policy-container">\n                        <h3 class="my-4">Übersicht der Richtlinien</h3>\n                        <div v-if="message != \'\'" class="alert alert-success">\n                            {{ message }}\n                        </div>\n                        <div class="row mb-3 border-bottom pb-2" v-for="p in policies">\n                            <div class="col-9">\n                                <i v-if="p.status==1" class="fa fa-check ml-3" style="color:green;"></i>\n                                <i v-if="p.status==0 || p.status==null" class="fa fa-times ml-3" style="color:red;"></i>\n                                <a :href="getPolicyLink(p.version)" target="s" class="bold">{{p.name}}</a><br>\n                                <span class="pl-3">Der Version vom {{ convertTime(p.creation) }}</span>\n                                <span v-if="p.status==1">\n                                    haben Sie am {{ convertTime(p.acceptance) }} zugestimmt.\n                                </span>\n                                <span v-if="p.status==0 || p.status==null">\n                                    haben Sie nicht zugestimmt.\n                                </span>\n                            </div>\n                            <div class="col-3">\n                                <span v-if="p.status==1">\n                                    <a :href="getLink(p,0)" class="right btn btn-sm btn-outline-primary">Zustimmung widerufen</a>\n                                </span>\n                                <span v-if="p.status==0 || p.status==null">\n                                    <div class="form-check">\n                                        <input v-model="hasRead[p.version]" class="form-check-input" type="checkbox" value="1" id="defaultCheck1">\n                                        <label class="form-check-label" style="font-size:0.8em;" for="defaultCheck1">\n                                            Ich habe die Richtlinie gelesen und akzeptiere sie.\n                                        </label>\n                                    </div>\n                                    <a :href="getLink(p,1)" :class="hasRead[p.version] ? \'btn btn-sm btn-primary\' : \'disabled btn btn-sm btn-primary\'">Akzeptieren</a>\n                                </span>\n                            </div>\n                        </div>\n                        <div>\n                            <form action="download_user_data.php" id="submitform" method="post">\n                                <button type="submit" class="btn btn-success" name="submit">Die über mich gesammelten Daten herunterladen</button>\n                            </form>\n                        </div>\n                        <div class="mt-3">\n                            <button type="button" class="btn btn-primary" onClick="javascript:window.location.href=\''+s+"'\">Zurück</button>\n                        </div>\n                    </div>\n                "})}}}));